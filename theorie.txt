definition socket : 

les sockets sont la base de la communication reseau. c est comme une prise ou un point de connexion pour communiquer sur le reseau.
on l utilise comme points de passage pour faire passer des donnees.

--> annalogie simple, un socket c est comme une boite au letre, on peut envoyer des lettres ou en recevoir.

dans notre cas a nous on va utiliser des socket TCP qui vont connecter le client et le serveur. voici les avamtages :

- connexion fiable : si tu envoie "ABC" ca arrive "ABC"
- ordre garante : les donnees arrivent dans l ordre
- detection d erreurs : si ca se perd on le sait
- comme un appel telephonique : connexion etable, conversation , raccrochage 


SERVEUR                           CLIENT
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Socket      â”‚                  â”‚ Socket      â”‚
â”‚ (Ã©coute)    â”‚                  â”‚             â”‚
â”‚ 127.0.0.1   â”‚ â†â”€â”€ connect â”€â”€â”€â”€ â”‚ random_port â”‚
â”‚ :8080       â”‚                  â”‚             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ accept() crÃ©e un nouveau socket
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Socket      â”‚ â†â”€â”€ recv/send â”€â”€â†’ Client
â”‚ (client)    â”‚
â”‚ fd = 5      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


Alice                    Bob
â”Œâ”€â”€â”€â”€â”€â”                â”Œâ”€â”€â”€â”€â”€â”
â”‚     â”‚ â†â”€â”€ LIGNE â”€â”€â”€â†’ â”‚     â”‚
â””â”€â”€â”€â”€â”€â”˜    (socket)    â””â”€â”€â”€â”€â”€â”˜
  â†‘                      â†‘
"Salut Bob!"         "Salut Alice!"
(les donnÃ©es)        (les donnÃ©es)


==> ligne pour creer le socket :

 _server_fd = socket(AF_INET, SOCK_STREAM, 0);
 AF_INET = IPV4
 SOCK_STREAM = TCP (connexion fiable)







ce qu il va se passe , a la creation de l objet server , on vide completement les fd_set mais on a aucun socket , les fd_set sont prets mais vides. et quand
on lance le serveur : 
server.ft_init_server();      // ICI on crÃ©e le socket
server.ft_start_listening();  // ICI on ajoute le socket aux fd_set


on doit initialise les fd_set dans le constructer car les fd_set contiennent des bits aleatoires en memoire au debut , donc si on ne les initialise pas a 0 on 
peut avoir des problemes.



explication des methodes : 

LA METHODE GET : 

get est la methode HTTP la plus simple, elle dit "donne moi la ressource qui se trouve a cette adresse". GET est donc un protoal HTTP pour demander une ressource.

- exemple d une requete GET :

GET /about.html HTTP/1.1
Host: localhost:8080
User-Agent: Mozilla/5.0...
Accept: text/html,application/xhtml+xml...
Connection: keep-alive

[corps vide - GET n'a jamais de body]

- exemple d une reponse GET :

HTTP/1.1 200 OK
Content-Type: text/html
Content-Length: 226
Date: Thu, 12 Jun 2025 14:30:00 GMT

<!DOCTYPE html>
<html>
<head>...
[contenu du fichier]

--> les 3 technologies fondamentales que le navigateur web peut interpreter nativement : du hTML ( role structure et contenu de la page)
du CSS (Apparence et mise en page), JAVASCRIPT (interactivite et logique)

Dans webServ, on fait une requete script, Webserv execute python et c est python qui genere/formate le HTML



â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                            ğŸš€ DÃ‰MARRAGE DU SERVEUR                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

1ï¸âƒ£ main.cpp lance le serveur
   â”œâ”€â”€ VÃ©rifie les arguments (config.conf)
   â”œâ”€â”€ parseConfigFile() â†’ Parse le fichier de configuration
   â”‚   â”œâ”€â”€ Lit server { listen, server_name, root, index, allowed_methods }
   â”‚   â””â”€â”€ Lit location { path, root, index, allowed_methods, client_max_body_size }
   â”œâ”€â”€ Affiche la configuration parsÃ©e
   â””â”€â”€ CrÃ©e Server(config) avec la configuration complÃ¨te

2ï¸âƒ£ Server::ft_init_server()
   â”œâ”€â”€ socket() â†’ CrÃ©e le socket TCP
   â”œâ”€â”€ setsockopt(SO_REUSEADDR) â†’ Permet de redÃ©marrer rapidement
   â”œâ”€â”€ fcntl(O_NONBLOCK) â†’ Socket non-bloquant
   â”œâ”€â”€ bind() â†’ Lie le socket au port (_config.listen)
   â””â”€â”€ Configuration depuis _config au lieu de valeurs en dur

3ï¸âƒ£ Server::ft_start_listening()
   â”œâ”€â”€ listen() â†’ Met le socket en Ã©coute
   â”œâ”€â”€ FD_SET() â†’ Ajoute le socket au fd_set
   â””â”€â”€ Affiche "Server listening on {server_name}:{port}"

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       ğŸ”„ BOUCLE PRINCIPALE DU SERVEUR                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

4ï¸âƒ£ Server::ft_handle_connections() - BOUCLE INFINIE
   â”œâ”€â”€ select() â†’ Attend des Ã©vÃ©nements sur les sockets
   â”œâ”€â”€ Parcourt tous les file descriptors
   â””â”€â”€ Pour chaque socket actif :
       â”œâ”€â”€ Si c'est _server_fd â†’ ft_accept_new_client()
       â””â”€â”€ Sinon â†’ ft_handle_client_request(client_fd)

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         ğŸ¤ GESTION D'UNE NOUVELLE CONNEXION                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

5ï¸âƒ£ Server::ft_accept_new_client()
   â”œâ”€â”€ accept() â†’ Accepte la connexion client
   â”œâ”€â”€ fcntl(O_NONBLOCK) â†’ Rend le socket client non-bloquant
   â”œâ”€â”€ FD_SET() â†’ Ajoute le client au fd_set de surveillance
   â”œâ”€â”€ _client_fds.push_back() â†’ Stocke le fd client
   â””â”€â”€ Met Ã  jour _max_fd si nÃ©cessaire

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      ğŸ“¨ TRAITEMENT D'UNE REQUÃŠTE CLIENT                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

6ï¸âƒ£ Server::ft_handle_client_request(client_fd)
   â”‚
   â”œâ”€â”€ recv() â†’ ReÃ§oit les donnÃ©es brutes du client
   â”‚   â””â”€â”€ Exemple : "GET /index.html HTTP/1.1\r\nHost: localhost..."
   â”‚
   â”œâ”€â”€ ft_is_request_complete() â†’ VÃ©rifie si la requÃªte est complÃ¨te
   â”‚   â”œâ”€â”€ Cherche "\r\n\r\n" (fin des headers)
   â”‚   â”œâ”€â”€ Pour GET/DELETE : OK si headers complets
   â”‚   â””â”€â”€ Pour POST : VÃ©rifie que le body est complet selon Content-Length
   â”‚
   â”œâ”€â”€ ft_parse_http_request() â†’ PARSING COMPLET DE LA REQUÃŠTE
   â”‚   â”‚
   â”‚   â”œâ”€â”€ ğŸ“ ft_parse_request_line()
   â”‚   â”‚   â”œâ”€â”€ SÃ©pare "GET /index.html HTTP/1.1"
   â”‚   â”‚   â”œâ”€â”€ Valide method âˆˆ {GET, POST, DELETE}
   â”‚   â”‚   â”œâ”€â”€ Valide version = "HTTP/1.1"
   â”‚   â”‚   â”œâ”€â”€ Valide URI commence par "/"
   â”‚   â”‚   â””â”€â”€ Stocke : request.method, request.uri, request.version
   â”‚   â”‚
   â”‚   â”œâ”€â”€ ğŸ“‹ ft_parse_headers()
   â”‚   â”‚   â”œâ”€â”€ Parse chaque ligne "Key: Value"
   â”‚   â”‚   â”œâ”€â”€ Trim les espaces
   â”‚   â”‚   â”œâ”€â”€ Convertit les clÃ©s en minuscules
   â”‚   â”‚   â””â”€â”€ Stocke dans request.headers["key"] = "value"
   â”‚   â”‚
   â”‚   â””â”€â”€ Pour POST : Extrait le body selon Content-Length
   â”‚       â””â”€â”€ Stocke dans request.body
   â”‚
   â””â”€â”€ ft_handle_request_with_config(method, uri) â†’ TRAITEMENT AVEC CONFIG

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    âš™ï¸ TRAITEMENT AVEC CONFIGURATION                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

7ï¸âƒ£ Server::ft_handle_request_with_config(method, uri)
   â”‚
   â”œâ”€â”€ ğŸ¯ ft_find_location(uri) â†’ Trouve la location qui match
   â”‚   â”œâ”€â”€ Parcourt _config.locations[]
   â”‚   â”œâ”€â”€ VÃ©rifie si uri.find(location.path) == 0
   â”‚   â””â”€â”€ Prend la location avec le path le plus long (plus prÃ©cise)
   â”‚   
   â”œâ”€â”€ âœ… ft_is_method_allowed(method, location)
   â”‚   â”œâ”€â”€ Utilise location->allowed_methods si existe
   â”‚   â”œâ”€â”€ Sinon utilise _config.allowed_methods
   â”‚   â””â”€â”€ Retourne true/false selon si method est autorisÃ©e
   â”‚
   â””â”€â”€ Router selon la mÃ©thode :
       â”œâ”€â”€ GET â†’ ft_serve_static_file_with_config(uri)
       â”œâ”€â”€ POST â†’ Retourne 405 (pas encore implÃ©mentÃ©)
       â””â”€â”€ DELETE â†’ Retourne 405 (pas encore implÃ©mentÃ©)

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        ğŸ“ SERVIR UN FICHIER STATIQUE                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

8ï¸âƒ£ Server::ft_serve_static_file_with_config(uri)
   â”‚
   â”œâ”€â”€ ğŸ¯ ft_find_location(uri) â†’ Re-trouve la location
   â”‚
   â”œâ”€â”€ ğŸ“‚ ft_get_file_path(uri, location) â†’ CONSTRUCTION DU CHEMIN
   â”‚   â”‚
   â”‚   â”œâ”€â”€ DÃ©termine root et index :
   â”‚   â”‚   â”œâ”€â”€ Si location existe : location->root ou _config.root
   â”‚   â”‚   â””â”€â”€ Sinon : _config.root et _config.index
   â”‚   â”‚
   â”‚   â”œâ”€â”€ Construction du chemin :
   â”‚   â”‚   â”œâ”€â”€ Si uri == "/" â†’ root + "/" + index
   â”‚   â”‚   â”œâ”€â”€ Si location et uri match location->path â†’ 
   â”‚   â”‚   â”‚   â””â”€â”€ EnlÃ¨ve le path de location de l'URI
   â”‚   â”‚   â””â”€â”€ Sinon â†’ root + uri
   â”‚   â”‚
   â”‚   â””â”€â”€ Exemples :
   â”‚       â”œâ”€â”€ uri="/" + config simple â†’ "./www/index.html"
   â”‚       â”œâ”€â”€ uri="/admin" + location "/admin" â†’ "./www/about.html"
   â”‚       â””â”€â”€ uri="/test.html" â†’ "./www/test.html"
   â”‚
   â”œâ”€â”€ ğŸ DÃ©tection CGI : Si file_path se termine par ".py"
   â”‚   â””â”€â”€ ft_execute_cgi(file_path) â†’ ExÃ©cute le script Python
   â”‚
   â”œâ”€â”€ ğŸ“– ft_read_file_simple(file_path) â†’ Lit le fichier
   â”‚   â”œâ”€â”€ ifstream(file_path) â†’ Ouvre le fichier
   â”‚   â”œâ”€â”€ getline() en boucle â†’ Lit ligne par ligne
   â”‚   â””â”€â”€ Retourne le contenu ou "" si erreur
   â”‚
   â”œâ”€â”€ ğŸ·ï¸ ft_get_content_type(file_path) â†’ DÃ©termine le MIME type
   â”‚   â”œâ”€â”€ Trouve l'extension (.html, .css, .js, .png...)
   â”‚   â””â”€â”€ Retourne le Content-Type appropriÃ©
   â”‚
   â””â”€â”€ ğŸ“¤ Construction de la rÃ©ponse HTTP :
       â”œâ”€â”€ "HTTP/1.1 200 OK\r\n"
       â”œâ”€â”€ "Content-Type: text/html\r\n"
       â”œâ”€â”€ "Content-Length: 1234\r\n"
       â”œâ”€â”€ "Server: WebServ/1.0\r\n"
       â”œâ”€â”€ "Connection: close\r\n"
       â”œâ”€â”€ "\r\n"
       â””â”€â”€ [contenu du fichier]

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           ğŸ EXÃ‰CUTION CGI (optionnel)                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

9ï¸âƒ£ Server::ft_execute_cgi(script_path) - SI FICHIER .py
   â”œâ”€â”€ popen("python3 " + script_path) â†’ ExÃ©cute le script
   â”œâ”€â”€ fgets() en boucle â†’ Lit la sortie du script
   â”œâ”€â”€ SÃ©pare headers et body du script
   â”œâ”€â”€ Calcule Content-Length du body
   â””â”€â”€ Construit la rÃ©ponse HTTP complÃ¨te

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          ğŸ“¤ ENVOI DE LA RÃ‰PONSE                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ğŸ”Ÿ Retour dans ft_handle_client_request()
   â”œâ”€â”€ send() â†’ Envoie la rÃ©ponse HTTP au client
   â””â”€â”€ ft_disconnect_client() â†’ Ferme la connexion
       â”œâ”€â”€ close(client_fd) â†’ Ferme le socket
       â”œâ”€â”€ FD_CLR() â†’ Retire de la surveillance
       â””â”€â”€ Supprime de _client_fds

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                             ğŸ”„ RETOUR EN BOUCLE                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Le serveur retourne en boucle Ã  l'Ã©tape 4ï¸âƒ£ et attend la prochaine connexion...

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         ğŸ“Š EXEMPLE DE TRAITEMENT COMPLET                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

curl http://localhost:8080/
â”‚
â”œâ”€â”€ Client envoie : "GET / HTTP/1.1\r\nHost: localhost:8080\r\n\r\n"
â”œâ”€â”€ Serveur parse : method="GET", uri="/", headers={"host":"localhost:8080"}
â”œâ”€â”€ ft_find_location("/") â†’ Aucune location (config simple)
â”œâ”€â”€ ft_is_method_allowed("GET") â†’ true (GET autorisÃ©)
â”œâ”€â”€ ft_get_file_path("/") â†’ "./www/index.html"
â”œâ”€â”€ ft_read_file_simple() â†’ Lit le contenu d'index.html
â”œâ”€â”€ Construit rÃ©ponse : "HTTP/1.1 200 OK..." + contenu HTML
â””â”€â”€ send() â†’ Envoie au client qui affiche la page

curl http://localhost:3000/admin (avec config advanced)
â”‚
â”œâ”€â”€ Client envoie : "GET /admin HTTP/1.1\r\nHost: localhost:3000\r\n\r\n"
â”œâ”€â”€ Serveur parse : method="GET", uri="/admin"
â”œâ”€â”€ ft_find_location("/admin") â†’ Trouve location "/admin"
â”œâ”€â”€ ft_is_method_allowed("GET", location) â†’ true
â”œâ”€â”€ ft_get_file_path("/admin", location) â†’ "./www/about.html" (index de la location!)
â”œâ”€â”€ ft_read_file_simple() â†’ Lit about.html au lieu d'un fichier "admin"
â””â”€â”€ send() â†’ Envoie about.html au client